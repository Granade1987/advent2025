<!DOCTYPE html>
<html lang="nl">
<head>
  <meta charset="UTF-8">
  <title>Mike's Adventskalender 2025</title>
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600&family=Lobster&display=swap" rel="stylesheet">
  
  <style>
    /* Kerstkleuren: Rood (#A30000), GOUD/GEEL (#FFD700), ZILVER/WIT (#C0C0C0/#fff) */
     
    /* * BELANGRIJKE OPLOSSING: ALLEEN STIJLEN BINNEN DE WRAPPER ZIJN GELDIG! */
    .mike-advent-kalender {
        /* Gebruikt Poppins voor algemene tekst */
        font-family: 'Poppins', sans-serif;
        text-align: center;
        background: transparent; 
        /* FIX: Zorg ervoor dat box-sizing overal goed staat */
        box-sizing: border-box; 
        margin: 0 auto;
        padding: 0;
    }

    /* EENVOUDIGE TITEL STIJL */
    .mike-advent-kalender .kalender-titel {
        margin-top: 20px;
        margin-bottom: 20px;
        color: #000; 
        font-size: 3.5rem; 
        font-weight: 400;
        /* LETTERTYPE TITEL: BLIJFT FEESTELIJK */
        font-family: 'Lobster', cursive; 
    }

    /* WRAPPER van de kalender */
    .mike-advent-kalender .house-wrapper {
        position: relative;
        margin: 0 auto 20px auto; 
        padding: 0; 
    }
    
    /* Styling voor de kalender container (het rechthoekige frame) */
    .mike-advent-kalender .calendar {
      display: grid;
      grid-template-columns: repeat(2, 1fr); 
      /* AANGEPAST: Minder ruimte tussen vakjes voor een dichter uiterlijk */
      gap: 6px; 
      max-width: 480px; 
      margin: 0 auto; 
      padding: 10px; 
      box-sizing: border-box;

      background: transparent; 
      border: 5px solid #A30000; /* KERSTRODE RAND VAN HET FRAME */
      border-radius: 15px; 
      box-shadow: inset 0 0 10px rgba(0, 0, 0, 0.2); 
    }

    /* Media Query voor Grotere Schermen (Desktop/Tablet): 4 Kolommen */
    @media (min-width: 600px) {
        .mike-advent-kalender .calendar {
            grid-template-columns: repeat(4, 1fr); 
            /* AANGEPAST: Minder ruimte tussen vakjes voor een dichter uiterlijk */
            gap: 10px; 
            max-width: 840px; 
        }
        .mike-advent-kalender .house-wrapper {
            max-width: 880px; 
        }
    }

    /* Stijlen voor de Flip-Animatie (de deurtjes zelf) */
    .mike-advent-kalender .door-container {
      width: 100%;
      height: 120px; 
      position: relative;
      perspective: 1000px;
      cursor: pointer;
      box-shadow: 0 3px 6px rgba(0,0,0,0.2);
      border-radius: 8px;
    }
    .mike-advent-kalender .door {
      width: 100%;
      height: 100%;
      position: absolute;
      transform-style: preserve-3d;
      /* FIX: We zetten de transition hier weer aan voor de animatie van nieuwe deuren */
      transition: transform 0.6s ease-out; 
      border-radius: 8px;
      border: 2px solid #A30000; 
      display: flex; 
      justify-content: center;
      align-items: center;
      /* FIX: Zorg ervoor dat dit element ook box-sizing heeft */
      box-sizing: border-box; 
    }
    .mike-advent-kalender .door-front, .mike-advent-kalender .door-back {
      position: absolute;
      width: 100%;
      height: 100%;
      backface-visibility: hidden;
      display: flex;
      justify-content: center;
      align-items: center;
      border-radius: 6px;
      padding: 10px;
      box-sizing: border-box;
      text-align: center;
    }
    .mike-advent-kalender .door-front {
      background: #A30000; 
      color: #fff; 
      transform: rotateY(0deg);
      font-weight: 600;
      /* AANGEPAST LETTERTYPE: Poppins voor duidelijke leesbaarheid van nummers */
      font-family: 'Poppins', sans-serif; 
      font-size: 2rem;
      /* Belangrijk voor positionering van de klink */
      position: relative; 
    }

    /* AANGEPAST: STIJL VOOR DE DEURKLINK (Zilver) */
    .mike-advent-kalender .door-front::after {
        content: ''; 
        position: absolute;
        top: 50%; 
        left: 10px; /* Links geplaatst */
        width: 15px; 
        height: 4px; 
        background-color: #C0C0C0; /* Zilver voor betere zichtbaarheid */
        transform-origin: 0% 50%; 
        transform: translateY(-50%) rotate(0deg); 
        transition: transform 0.3s ease-in-out; /* De klink-animatie is 0.3s */
        border-radius: 2px;
        box-shadow: 0 1px 3px rgba(0,0,0,0.3);
        z-index: 10;
    }

    /* NIEUW: Animatie wanneer het deurtje wordt geopend */
    .mike-advent-kalender .door-container.open .door-front::after {
        transform: translateY(-50%) rotate(45deg); /* Draai 45 graden naar beneden */
    }

    .mike-advent-kalender .door-back {
      /* AANGEPAST: Achtergrond is nu GOUD/GEEL */
      background: #FFD700; 
      /* AANGEPAST: Tekstkleur op goud/geel is zwart */
      color: #000; 
      transform: rotateY(180deg);
      font-size: 1.2rem;
      font-weight: bold;
      line-height: 1.3;
      overflow: hidden;
      display: flex;
      flex-direction: column;
      justify-content: center;
      align-items: center;
      padding: 5px;
    }
    /* De correcte STIJL VOOR ALLEEN DE EMOJI */
    .mike-advent-kalender .door-back span {
        font-size: 2.8rem; /* Zeer groot voor de emoji */
        line-height: 1.1;
        display: block;
        margin-bottom: 5px; 
        margin-top: 5px;
    }
    .mike-advent-kalender .door-back u {
        /* AANGEPAST: Onderstreping is nu zwart i.p.v. wit */
        text-decoration-color: #000; 
    }
    .mike-advent-kalender .door-container.active .door-front {
      background: #A30000; 
      color: #fff;
      cursor: pointer;
    }
    .mike-advent-kalender .door-container.active .door-front:hover {
      background: #D73A3A; 
      color: #fff; 
      transform: scale(1.02);
      box-shadow: 0 0 10px rgba(0,0,0,0.4);
    }
    .mike-advent-kalender .door-container.disabled {
      opacity: 0.5; 
      cursor: not-allowed;
    }
    .mike-advent-kalender .door-container.disabled .door-front {
      background: #ccc; 
      color: #777;
    }
    .mike-advent-kalender .door-container.open {
      cursor: default;
    }
    .mike-advent-kalender .reward {
      display: none;
    }
    /* Stijl voor de resetknop */
    #resetButton {
        margin: 40px auto;
        padding: 12px 25px;
        background-color: #A30000; 
        color: white;
        border: none;
        border-radius: 8px;
        cursor: pointer;
        font-size: 1.1rem;
        transition: background-color 0.3s, transform 0.2s;
        box-shadow: 0 4px 8px rgba(0,0,0,0.2);
    }
    #resetButton:hover {
        background-color: #c9302c; 
        transform: translateY(-2px);
    }
    #resetButton:active {
        transform: translateY(0);
        box-shadow: 0 2px 4px rgba(0,0,0,0.2);
    }
  </style>

  <script defer>
    
    const rewards = {
      "1": "<span>ü§©</span><br>10% korting op alles!<br>Code: <u>DEC10</u>",
      "2": "<span>üöö</span><br>Gratis verzending <u>ALLEEN</u> vandaag!",
      "3": "<span>üí∞</span><br>‚Ç¨5,- korting op 1 bestelling!<br>(Voor geregistreerde klanten)",
      "4": "<span></span><br>15% korting op alle polo's!",
      "5": "<span>üéÅ</span><br>Gratis cadeauverpakking bij elke bestelling!",
      "6": "<span>üí∏</span><br>‚Ç¨5,- extra korting op je bestelling!",
      "7": "",
      "8": "",
      "9": "",
      "10": "<span>üõçÔ∏è</span><br>Koop 3, betaal 2 op (u)DEZE(/u) geselecteerde items.",
      "11": "<span>üßî</span><br>15% korting op alle winterjassen!",
      "12": "<span>üõÅ</span><br>Gratis beanie bij elke bestelling.",
      "13": "<span>üíå</span><br>Gratis een cadeauverpakking!",
      "14": "<span>üì¶</span><br>Vandaag alleen: Geen verzendkosten!",
      "15": "<span>üçÇ</span><br>Ontvang 15% korting op onze wintercollectie.",
      "16": "<span>üåü</span><br>Speciale 'Mike's Best' bundel voor ‚Ç¨49.",
      "17": "",
      "18": "",
      "19": "",
      "20": "",
      "21": "",
      "22": "",
      "23": "",
      "24": "<span>üéÖüéÑ</span><br>Vrolijk kerstfeest en bedankt voor 2025!"
    };

    const now = new Date();
    const today = now.getDate();
    const month = now.getMonth();  
    const openedDays = JSON.parse(localStorage.getItem('openedDays')) || [];

    function buildCalendar() {
        const calendar = document.getElementById('calendar');
        const resetButton = document.getElementById('resetButton');

        function saveOpenedDay(day) {
            if (!openedDays.includes(day)) {
                openedDays.push(day);
                localStorage.setItem('openedDays', JSON.stringify(openedDays));
            }
        }

        function setRewardText(day, doorBackElement) {
            const rewardText = rewards[day] ? rewards[day] : "Nog niets ingesteld üéÅ";
            doorBackElement.innerHTML = rewardText;
        }

        function resetCalendar() {
            if (confirm("Weet u zeker dat u de kalender wilt resetten? Alle geopende vakjes worden gewist.")) {
                localStorage.removeItem('openedDays');
                window.location.reload();
            }
        }
        
        if (resetButton) {
            resetButton.addEventListener('click', resetCalendar);
        }

        // --- CONTROLE LOGICA ---
        for (let i = 1; i <= 24; i++) {
            const doorContainer = document.createElement('div');
            doorContainer.classList.add('door-container');
            
            const door = document.createElement('div');
            door.classList.add('door');

            const doorFront = document.createElement('div');
            doorFront.classList.add('door-front');
            doorFront.textContent = i;

            const doorBack = document.createElement('div');
            doorBack.classList.add('door-back');
            
            door.appendChild(doorFront);
            door.appendChild(doorBack);
            doorContainer.appendChild(door);

            const isDecember = month === 11;
            const isOctoberTest = month === 9; /* TESTMODUS MAAND */ 

            let isActiveDay = false;

            // *** START TESTMODUS: (VERWIJDER DEZE HELE IF-BLOK VOOR DE LIVE-GANG IN DECEMBER!) ***
            if (isOctoberTest && i <= today) { 
                isActiveDay = true;
            }
            
            // ECHTE LOGICA voor december:
            else if (isDecember && i <= today) {
                isActiveDay = true;
            }
            
            if (openedDays.includes(i)) {
                // Deur is reeds geopend: moet direct open staan zonder animatie
                door.style.transition = 'transform 0s'; 
                door.style.transform = 'rotateY(180deg)'; // Zet hem direct open
                doorContainer.classList.add('open');
                setRewardText(i, doorBack);
            } 
            else if (isActiveDay) {
                // Deur is actief en nog niet geopend
                // FIX: Zorg dat de transition voor de animatie weer aan staat
                door.style.transition = 'transform 0.6s ease-out';
                doorContainer.classList.add('active');
                doorContainer.addEventListener('click', () => {
                    if (!doorContainer.classList.contains('active')) return;

                    const doorElement = doorContainer.querySelector('.door');
                    if (!doorElement) return;

                    setRewardText(i, doorBack); 
                    
                    // 1. Zorg dat de klink-animatie begint (door 'open' class toe te voegen)
                    doorContainer.classList.add('open');
                    
                    // 2. Vertraging voor de deur om te draaien (0.3s is de klink-animatie)
                    setTimeout(() => {
                        // 3. Deur draait nu pas met animatie
                        doorElement.style.transform = 'rotateY(180deg)';
                    }, 300); // Wacht 300 milliseconden

                    doorContainer.classList.remove('active');
                    saveOpenedDay(i);
                });
            } 
            else {
                doorContainer.classList.add('disabled');
            }

            calendar.appendChild(doorContainer);
        }
    }
    
    document.addEventListener('DOMContentLoaded', buildCalendar);

  </script>
</head>

<body>
  <div class="mike-advent-kalender">
      <h2 class="kalender-titel">üéÑ Mike's Adventskalender 2025 üéÅ</h2>
      <div class="house-wrapper">
        <div class="calendar" id="calendar"></div>
      </div>
      <button id="resetButton">üîÑ Kalender Resetten (alle vakjes dicht)</button>
  </div>
</body>
</html>
